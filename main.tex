%!TEX bibfile = bibliografia.bib

\documentclass[a4paper,10pt,oneside]{report}

% --- Impostazioni di base ---
\linespread{1.5}
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.75em}
\pagestyle{plain}

\usepackage{geometry}
\geometry{a4paper, top=2.5cm, bottom=2cm, left=2cm, right=2cm, bindingoffset=5mm}

\usepackage{graphicx}

% --- FONT UNIFORMI SU TUTTI I MOTORI ---
% Evita differenze tra pdfLaTeX / XeLaTeX / LuaLaTeX
%\usepackage{lmodern} % oppure: \usepackage{newtxtext,newtxmath}

% --- MICROTIPOGRAFIA DISATTIVATA (per uniformità) ---
\usepackage[protrusion=false,expansion=false]{microtype}

% --- Pacchetti vari ---
\usepackage{xcolor}
\usepackage{listings}
\usepackage{pgf-spectra} % fornisce \pgfspectra
\usepackage{tikz}
\usepackage{tikz-3dplot}
\usetikzlibrary{backgrounds}
\usetikzlibrary{angles,quotes,calc,positioning}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{decorations.markings}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\tdplotsetmaincoords{70}{120}
\tikzset{ fLines/.style={thin,->} }
\usepackage{siunitx}


% --- Listings (MATLAB) ---
\lstset{
  language=Matlab,
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue},
  commentstyle=\color{green!60!black},
  stringstyle=\color{red},
  numbers=left,
  numberstyle=\tiny,
  stepnumber=1,
  numbersep=5pt,
  backgroundcolor=\color{gray!10},
  frame=single,
  breaklines=true,
  captionpos=b,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  tabsize=2
}

\usepackage{multicol}
\usepackage{ragged2e}
\usepackage{caption}
\captionsetup{textfont=sl}

\usepackage{pdfpages}
\usepackage{csquotes}

% --- Matematica ---
\usepackage{amsmath,amssymb,mathtools}
\usepackage{esint}

% --- Grafici e tabelle ---
\usepackage{pgfplotstable}
\usepackage{pgfplots}
\pgfplotsset{
  compat=newest, % TikZ coordinates <-> axes coordinates
  /pgf/number format/1000 sep={},
  legend image code/.code={
    \draw[mark repeat=2,mark phase=2]
    plot coordinates {(0cm,0cm) (0.22cm,0cm) (0.44cm,0cm)};%
  }
} 

% --- Lingua ---
\usepackage[italian]{babel}

% --- Hyperref + PDF uniformi ---
\usepackage{hyperref}
\hypersetup{
  pdfauthor={Antonio Ausilio},
  pdftitle={Appunti del Corso di Strumentazione Avanzata per la Diagnosi e Terapia},
  pdfcreationdate={},
  pdfmoddate={}
}


% --- MiniToc ---
\usepackage{minitoc}
\nomtcrule
\addto{\captionsitalian}{
  \renewcommand{\mtctitle}{Sommario}
}
\setcounter{secnumdepth}{5}

% --- Bibliografia ---
\usepackage[
  sorting=none,
  backend=biber,
  refsection=chapter
]{biblatex}
\defbibheading{bibbysubsect}{}
\addbibresource{bibliografia.bib}

% --- Patch capitoli centrati ---
\usepackage{xpatch}
\makeatletter
\xpatchcmd{\@makeschapterhead}
  {\Huge \bfseries #1\par\nobreak}
  {\Huge \bfseries\centering #1\par\nobreak}
  {}{}
\xpatchcmd{\@makechapterhead}
  {\huge\bfseries \@chapapp\space \thechapter}
  {\huge\bfseries\centering \@chapapp\space \thechapter}
  {}{}
\makeatother

% --- Varie ---
\usepackage{csvsimple}
\usepackage{fancyhdr}
\usepackage[export]{adjustbox}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{lscape}
\usepackage{wrapfig}
\usepackage{pgffor}
\usepackage{subcaption}
\usepackage[version=4]{mhchem}
\usepackage{chemfig}

\usepackage{longtable}
\usepackage{array}
\usepackage{enumitem}
\usepackage{supertabular}
\usepackage{breqn}
\usepackage{blindtext}

\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}}

% --- Comandi personalizzati ---
\newcommand{\gbar}{\mathrlap{\raisebox{0.5ex}{\rule{0.5em}{0.1pt}}}\gamma}

\newcommand{\imagesperrow}{3}
\newcommand{\imgwidth}{0.3\textwidth}
\newcounter{imgcount}

%Da qui in poi inizia il documento.
\begin{document}
\input{Copertina.tex}

\dominitoc
\tableofcontents

\include{Capitoli/1_Meccanica}
\include{Capitoli/2_Relatività}
\include{Capitoli/3_Elettromagnetismo}
\include{Capitoli/4_Quantistica}
\include{Capitoli/5_MecStatistica}

\include{Capitoli/6_IntroMRI}
\include{Capitoli/7_MRISignal}
\include{Capitoli/8_Grad}
\include{Capitoli/9_Ric2D}
\include{Capitoli/10_Ric3D}
\include{Capitoli/11_SNR}
\include{Capitoli/12_FatSupp}
\include{Capitoli/13_FastImm}
\include{Capitoli/14_FuncImm}
\include{Capitoli/15_HWRMI}

\include{Capitoli/16_PrincFis}
\include{Capitoli/17_Detettori}
\include{Capitoli/18_PTM}
\include{Capitoli/19_Circuiti}
\include{Capitoli/20_ElaDati}
\include{Capitoli/21_RicImmPET}
\include{Capitoli/22_PrestazioniPET}
\include{Capitoli/23_DualEn}
\include{Capitoli/24_VisualImm}

\medskip

\newpage
\printbibheading[
heading=bibintoc,
title={Bibliografia}
]
\bibbysection[heading=bibbysubsect]

\end{document}
