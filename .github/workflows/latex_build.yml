name: Build LaTeX Document

# Definisce quando il workflow deve essere eseguito
on:
  push:
    branches: [ main, master ] # Esegui su push sui branch principali
  pull_request:
    branches: [ main, master ] # Esegui su pull request sui branch principali
  workflow_dispatch: # Permette l'esecuzione manuale dalla scheda Actions

jobs:
  build_latex:
    runs-on: ubuntu-latest # Esegue il job su un runner Ubuntu

    steps:
      # 1. Checkout del repository: scarica il codice LaTeX
      - name: Set up Git repository
        uses: actions/checkout@v4

      # 2. Compilazione del documento LaTeX
      - name: Compile LaTeX document
        uses: xu-cheng/latex-action@v3
        with:
          # Sostituisci 'documento_principale.tex' con il nome del tuo file .tex principale
          root_file: main.tex 
          # Puoi specificare un altro compilatore o argomenti qui se necessario
          # compiler: xelatex 

      # 3. Caricamento del PDF come Artifact (risultato)
      # Questo rende il PDF compilato scaricabile dalla scheda 'Actions'
      - name: Upload PDF artifact
        uses: actions/upload-artifact@v4
        with:
          name: PDF_Compilato
          path: main.pdf # Il nome del file PDF generato